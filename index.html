<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ü–∞—Ä—Å–µ—Ä –∞—Ä—Ç–∏–∫—É–ª–æ–≤</title>

  <!-- üîπ –§–∞–≤–∏–∫–æ–Ω–∫–∞ –≤–∫–ª–∞–¥–∫–∏ (–ª–æ–≥–æ—Ç–∏–ø icon.svg –≤ —Ç–µ–∫—É—â–µ–π –ø–∞–ø–∫–µ) -->
  <link rel="icon" href="icon.svg" type="image/svg+xml">
  <!-- –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ -->
  <link rel="alternate icon" href="icon.svg">

  <style>
    :root {
      --bg: #0b0c10;
      --card: #12141a;
      --text: #e8ecf1;
      --muted: #a7b0ba;
      --accent: #4da3ff;
      --border: #1c2028;
      --ok: #27c498;
      --warn: #ffb020;
      --err: #ff4d6d;
      --radius: 14px;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: radial-gradient(1200px 800px at 20% -10%, #162034 0%, transparent 60%),
                  radial-gradient(1000px 700px at 120% 20%, #1a2338 0%, transparent 55%),
                  var(--bg);
      color: var(--text);
      font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
    }
    .wrap {
      max-width: 1100px;
      margin: 32px auto;
      padding: 0 20px 80px;
    }
    .title {
      font-size: 28px;
      font-weight: 700;
      letter-spacing: .2px;
      margin: 6px 0 18px;
    }
    .grid {
      display: grid;
      gap: 16px;
      grid-template-columns: 1.4fr 1fr;
    }
    @media (max-width: 980px) {
      .grid { grid-template-columns: 1fr; }
    }
    .card {
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.00));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    .card-h {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      padding: 14px 16px;
      border-bottom: 1px solid var(--border);
    }
    .card-h h3 {
      margin: 0;
      font-size: 16px;
      font-weight: 600;
      color: var(--text);
    }
    .card-b { padding: 14px; }

    textarea {
      width: 100%;
      min-height: 260px;
      resize: vertical;
      border: 1px dashed var(--border);
      border-radius: 12px;
      background: #0e1117;
      color: var(--text);
      padding: 12px 12px 48px;
      outline: none;
      transition: border-color .2s ease;
    }
    textarea:focus { border-color: var(--accent); }

    .controls {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 12px;
    }
    button, .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 14px;
      border-radius: 12px;
      background: #182133;
      color: var(--text);
      border: 1px solid var(--border);
      cursor: pointer;
      font-weight: 600;
      transition: transform .04s ease, background .2s ease, border-color .2s ease;
      user-select: none;
    }
    button:hover, .btn:hover {
      background: #1b2740;
      border-color: #2a3446;
    }
    button:active, .btn:active { transform: translateY(1px); }
    .btn-primary {
      background: linear-gradient(180deg, #2f6df7, #275de0);
      border-color: #2355cc;
    }
    .btn-primary:hover { filter: brightness(1.05); }

    .out {
      min-height: 260px;
      white-space: pre-wrap;
      word-break: break-word;
      font-family: ui-monospace, Menlo, Consolas, "SF Mono", monospace;
      font-size: 14px;
      color: var(--text);
    }
    .muted { color: var(--muted); }

    /* –ü—Ä–∏–º–µ—Ä –±–ª–æ–∫–∞ ‚Äî –±–µ–∑ –Ω–∞–¥–ø–∏—Å–∏ "–ø—Ä–∏–º–µ—Ä..." */
    .example {
      font-size: 13px;
      color: var(--muted);
      border-top: 1px dashed var(--border);
      margin-top: 10px;
      padding-top: 10px;
    }

    /* –§—É—Ç–µ—Ä ‚Äî –±–µ–∑ "–í—Å–µ–≥–æ/–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö" */
    .footer {
      max-width: 1100px;
      margin: 24px auto 40px;
      padding: 0 20px;
      color: var(--muted);
      font-size: 12px;
      opacity: .8;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="title">–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ –∞—Ä—Ç–∏–∫—É–ª–æ–≤</div>

    <div class="grid">
      <!-- –í–≤–æ–¥ -->
      <section class="card">
        <div class="card-h">
          <h3>–í–≤–æ–¥</h3>
        </div>
        <div class="card-b">
          <!-- üîπ –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä –∏–∑–º–µ–Ω—ë–Ω: "–í—Å—Ç–∞–≤—å—Ç–µ —Å–ø–∏—Å–æ–∫ –∞—Ä—Ç–∏–∫—É–ª–æ–≤" -->
          <textarea id="source" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å–ø–∏—Å–æ–∫ –∞—Ä—Ç–∏–∫—É–ª–æ–≤"></textarea>
          <div class="controls">
            <button class="btn-primary" id="run">–û–±—Ä–∞–±–æ—Ç–∞—Ç—å</button>
            <button id="clear">–û—á–∏—Å—Ç–∏—Ç—å</button>
            <button id="copy">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
          </div>

          <!-- –ü—Ä–∏–º–µ—Ä –±–µ–∑ —Å–ª–æ–≤–∞ ¬´–ø—Ä–∏–º–µ—Ä‚Ä¶¬ª –∏ —Å –∫–æ—Ä–æ—Ç–∫–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º -->
          <div class="example" id="ex">
            –ü—Ä–∏–º–µ—Ä —Ñ–æ—Ä–º–∞—Ç–∞ –≤—Ö–æ–¥–∞ (—Å–æ–∫—Ä–∞—â—ë–Ω–Ω–æ):<br>
            Renault&nbsp;&nbsp;391002033R<br>
            Renault&nbsp;&nbsp;391004571R<br>
            Renault&nbsp;&nbsp;391007212R<br>
          </div>
        </div>
      </section>

      <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç -->
      <section class="card">
        <div class="card-h">
          <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
          <!-- üî∏ –°—á—ë—Ç—á–∏–∫–∏ ¬´–í—Å–µ–≥–æ/–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö¬ª —É–¥–∞–ª–µ–Ω—ã –ø–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É -->
        </div>
        <div class="card-b">
          <div id="out" class="out muted">–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫‚Ä¶</div>
        </div>
      </section>
    </div>
  </div>

  <div class="footer">
    –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–µ —Ç–∞–∫ ‚Äî –∫–∏–Ω—å—Ç–µ –ø—Ä–∏–º–µ—Ä –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
  </div>

  <script>
    // –ü—Ä–æ—Å—Ç–æ–π —Ä–∞–∑–±–æ—Ä: –±–µ—Ä—ë–º –≤—Å—ë, —á—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ ¬´—Å–ª–æ–≤–æ-–∞—Ä—Ç–∏–∫—É–ª¬ª (–±—É–∫–≤—ã/—Ü–∏—Ñ—Ä—ã, –¥–µ—Ñ–∏—Å/—Å–ª—ç—à)
    const SRC = document.getElementById('source');
    const OUT = document.getElementById('out');
    const BTN_RUN = document.getElementById('run');
    const BTN_CLEAR = document.getElementById('clear');
    const BTN_COPY = document.getElementById('copy');
    const EX = document.getElementById('ex');

    function parseLines(text) {
      // –†–∞–∑–¥–µ–ª—è–µ–º –ø–æ —Å—Ç—Ä–æ–∫–∞–º, —Ä–µ–∂–µ–º —Ö–≤–æ—Å—Ç—ã/–ø–æ–≤—Ç–æ—Ä—ã
      const lines = text.split(/\r?\n/).map(s => s.trim()).filter(Boolean);

      // –ü—ã—Ç–∞–µ–º—Å—è –¥–æ—Å—Ç–∞—Ç—å –∞—Ä—Ç–∏–∫—É–ª—ã –∏–∑ –≤—Ç–æ—Ä–æ–π ¬´–∫–æ–ª–æ–Ω–∫–∏¬ª, –µ—Å–ª–∏ –µ—Å—Ç—å
      // –ò–Ω–∞—á–µ –±–µ—Ä—ë–º ¬´—Å–∞–º–æ–µ –¥–ª–∏–Ω–Ω–æ–µ —Å–ª–æ–≤–æ¬ª —Å –±—É–∫–≤–µ–Ω–Ω–æ-—Ü–∏—Ñ—Ä–æ–≤—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏
      const rxArticle = /[A-Za-z–ê-–Ø–∞-—è0-9][A-Za-z–ê-–Ø–∞-—è0-9\-_/]+/g;

      const result = [];
      for (const raw of lines) {
        // –µ—Å–ª–∏ –µ—Å—Ç—å —á—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ 2+ ¬´–∫–æ–ª–æ–Ω–∫–∏¬ª –ø—Ä–æ–±–µ–ª–∞–º–∏/—Ç–∞–±–∞–º–∏
        const cols = raw.split(/\s{2,}|\t+/).map(s => s.trim()).filter(Boolean);
        let pick = null;

        if (cols.length >= 2) {
          // –±–µ—Ä—ë–º –ø—Ä–∞–≤—É—é ¬´–∫–æ–ª–æ–Ω–∫—É¬ª
          pick = cols[cols.length - 1];
        } else {
          // –∏–Ω–∞—á–µ –ø—ã—Ç–∞–µ–º—Å—è –ø–æ–π–º–∞—Ç—å ¬´–∞—Ä—Ç–∏–∫—É–ª–æ–ø–æ–¥–æ–±–Ω—ã–π¬ª —Ñ—Ä–∞–≥–º–µ–Ω—Ç
          const m = raw.match(rxArticle);
          if (m && m.length) {
            // –±–µ—Ä—ë–º —Å–∞–º—ã–π –¥–ª–∏–Ω–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç
            pick = m.sort((a,b)=>b.length-a.length)[0];
          }
        }
        if (pick) result.push(pick);
      }
      // dedupe —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø–æ—Ä—è–¥–∫–∞
      const seen = new Set();
      const unique = [];
      for (const a of result) {
        if (!seen.has(a)) {
          seen.add(a);
          unique.push(a);
        }
      }
      return unique;
    }

    BTN_RUN.addEventListener('click', () => {
      const text = SRC.value.trim();
      if (!text) {
        OUT.textContent = '–ü—É—Å—Ç–æ–π –≤–≤–æ–¥. –í—Å—Ç–∞–≤—å—Ç–µ —Å–ø–∏—Å–æ–∫ –∞—Ä—Ç–∏–∫—É–ª–æ–≤.';
        OUT.classList.add('muted');
        return;
      }
      const list = parseLines(text);
      OUT.textContent = list.join('\n') || '–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.';
      OUT.classList.remove('muted');
    });

    BTN_CLEAR.addEventListener('click', () => {
      SRC.value = '';
      OUT.textContent = '–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫‚Ä¶';
      OUT.classList.add('muted');
    });

    BTN_COPY.addEventListener('click', async () => {
      const data = OUT.textContent.trim();
      if (!data) return;
      try {
        await navigator.clipboard.writeText(data);
        BTN_COPY.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ';
        setTimeout(() => BTN_COPY.textContent = '–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç', 1200);
      } catch (e) {
        alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å: ' + e.message);
      }
    });

    // –ö–ª–∏–∫ –ø–æ –ø—Ä–∏–º–µ—Ä—É –∑–∞–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–µ
    EX.addEventListener('click', () => {
      SRC.value =
`Renault   391002033R
Renault   391004571R
Renault   391007212R
Renault   391007857R
Renault   391008333R
Renault   391014232R
Renault   391016613R
Renault   391018112R
Renault   391018946R`;
      OUT.textContent = '–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫‚Ä¶';
      OUT.classList.add('muted');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  </script>
</body>
</html>
